# Declare build arguments
ARG SMTP_HOST
ARG SMTP_PORT
ARG SMTP_USER
ARG SMTP_PASS
ARG CONTACT_EMAIL
ARG REACT_APP_WEBSITE_NAME
ARG REACT_APP_PHONE_NUMBER

FROM node:18-alpine

# Set them as environment variables
ENV SMTP_HOST=$SMTP_HOST
ENV SMTP_PORT=$SMTP_PORT
ENV SMTP_USER=$SMTP_USER
ENV SMTP_PASS=$SMTP_PASS
ENV CONTACT_EMAIL=$CONTACT_EMAIL
ENV REACT_APP_WEBSITE_NAME=$REACT_APP_WEBSITE_NAME
ENV REACT_APP_PHONE_NUMBER=$REACT_APP_PHONE_NUMBER

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3001

CMD ["npm", "start"]
